language: python
python:
    - "3.6"

services:
    - docker

before_script: pip install docker-compose

branches:
    only:
        - master

script:
    - docker-compose -f docker-compose.test.yaml run app sh -c "python manage.py test"
    - docker build -t ssraghavan13/recipe-app-api .
    - docker login -u=${DOCKERHUB_USERNAME} -p=${DOCKERHUB_PASSWORD}
    - docker push ssraghavan13/recipe-app-api